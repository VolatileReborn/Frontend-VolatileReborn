{"ast":null,"code":"import { login } from \"@/api/user\";\nimport { register } from \"@/api/user\";\nimport { ElMessage } from \"element-plus\";\nexport default {\n  name: 'login-register',\n\n  data() {\n    return {\n      isLogin: true,\n      phonenumberError: false,\n      passwordError: false,\n      existed: false,\n      form: {\n        username: '',\n        phonenumber: '',\n        userpwd: '',\n        role: 0\n      },\n      roles: [{\n        value: 0,\n        label: '发包方'\n      }, {\n        value: 1,\n        label: '众包工人'\n      }]\n    };\n  },\n\n  methods: {\n    changeType() {\n      this.isLogin = !this.isLogin;\n      this.form.username = '';\n      this.form.phonenumber = '';\n      this.form.userpwd = '';\n    },\n\n    handleRegister() {\n      if (this.form.username !== \"\" && this.form.phonenumber !== \"\" && this.form.userpwd !== \"\") {\n        register({\n          phoneNumber: this.form.phonenumber,\n          password: this.form.userpwd,\n          role: this.form.role,\n          nickname: this.form.username\n        }).then(res => {\n          if (res.response.code === 0) {\n            // console.log(res.msg)\n            // console.log(res.data)\n            this.$router.push(\"/registerSucceed/\" + this.form.username);\n          } else {\n            console.log(res.response.message);\n          }\n        });\n      } else {\n        alert(\"填写不能为空！\");\n      }\n    },\n\n    handleLogin() {\n      if (this.form.phonenumber !== \"\" && this.form.userpwd !== \"\") {\n        login({\n          phoneNumber: this.form.phonenumber,\n          password: this.form.userpwd\n        }).then(res => {\n          console.log(res);\n\n          if (res.response.code === 0) {\n            // console.log(res.msg)\n            // console.log(res.data)\n            window.localStorage.setItem(\"token\", res.token);\n            window.localStorage.setItem(\"nickname\", res.nickname);\n            window.localStorage.setItem(\"role\", res.role);\n            console.log(window.localStorage.getItem(\"nickname\"));\n            console.log(window.localStorage.getItem(\"role\"));\n            ElMessage({\n              message: \"登录成功\",\n              type: 'success',\n              onClose: () => {\n                this.$router.push(\"/taskSquare\");\n              }\n            });\n            setTimeout(() => {\n              this.$router.go(0);\n            }, 4000);\n          } else {\n            console.log(res.response.message);\n          }\n        });\n      } else {\n        alert(\"填写不能为空！\");\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["login","register","ElMessage","name","data","isLogin","phonenumberError","passwordError","existed","form","username","phonenumber","userpwd","role","roles","value","label","methods","changeType","handleRegister","phoneNumber","password","nickname","then","res","response","code","$router","push","console","log","message","alert","handleLogin","window","localStorage","setItem","token","getItem","type","onClose","setTimeout","go"],"sourceRoot":"","sources":["/home/lyk/Projects/Volatile/frontend-volatile/src/views/Login.vue"],"sourcesContent":["<template>\n\t<div class=\"login-register\">\n\t\t<div class=\"contain\">\n\t\t\t<div class=\"big-box\" :class=\"{active:isLogin}\">\n\t\t\t\t<div class=\"big-contain\" v-if=\"isLogin\">\n\t\t\t\t\t<div class=\"btitle\">账户登录</div>\n\t\t\t\t\t<div class=\"bform\">\n\t\t\t\t\t\t<input type=\"phonenumber\" placeholder=\"手机号\" v-model=\"form.phonenumber\">\n\t\t\t\t\t\t<span class=\"errTips\" v-if=\"phonenumberError\">* 手机号填写错误 *</span>\n\t\t\t\t\t\t<input type=\"password\" placeholder=\"密码\" v-model=\"form.userpwd\">\n\t\t\t\t\t\t<span class=\"errTips\" v-if=\"emailError\">* 密码填写错误 *</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button class=\"bbutton\" @click=\"handleLogin\">登录</button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"big-contain\" v-else>\n\t\t\t\t\t<div class=\"btitle\">创建账户</div>\n\t\t\t\t\t<div class=\"bform\">\n\t\t\t\t\t\t<input type=\"text\" placeholder=\"用户名\" v-model=\"form.username\">\n\t\t\t\t\t\t<span class=\"errTips\" v-if=\"existed\">* 用户名已经存在！ *</span>\n\t\t\t\t\t\t<input type=\"phonenumber\" placeholder=\"手机号\" v-model=\"form.phonenumber\">\n\t\t\t\t\t\t<input type=\"password\" placeholder=\"密码\" v-model=\"form.userpwd\">\n            <div>\n<!--              <el-radio v-model=\"form.role\" label=\"0\" >发包方</el-radio>-->\n<!--              <el-radio v-model=\"form.role\" label=\"1\">众包工人</el-radio>-->\n              <el-select v-model=\"form.role\" placeholder=\"选择你的身份\" size=\"large\" style=\"width: 310px\">\n                <el-option\n                    v-for=\"item in roles\"\n                    :key=\"item.value\"\n                    :label=\"item.label\"\n                    :value=\"item.value\"></el-option>\n              </el-select>\n            </div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button class=\"bbutton\" @click=\"handleRegister\">注册</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"small-box\" :class=\"{active:isLogin}\">\n\t\t\t\t<div class=\"small-contain\" v-if=\"isLogin\">\n\t\t\t\t\t<div class=\"stitle\">你好，朋友!</div>\n\t\t\t\t\t<p class=\"scontent\">开始注册，加入众包世界</p>\n\t\t\t\t\t<button class=\"sbutton\" @click=\"changeType\">注册</button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"small-contain\" v-else>\n\t\t\t\t\t<div class=\"stitle\">欢迎回来!</div>\n\t\t\t\t\t<p class=\"scontent\">进入众包世界，请登录你的账户</p>\n\t\t\t\t\t<button class=\"sbutton\" @click=\"changeType\">登录</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport {login} from \"@/api/user\";\nimport {register} from \"@/api/user\";\nimport {ElMessage} from \"element-plus\"\nexport default{\n\t\tname:'login-register',\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\tisLogin:true,\n\t\t\t\tphonenumberError: false,\n\t\t\t\tpasswordError: false,\n\t\t\t\texisted: false,\n\t\t\t\tform:{\n\t\t\t\t\tusername:'',\n\t\t\t\t\tphonenumber:'',\n\t\t\t\t\tuserpwd:'',\n          role:0\n\t\t\t\t},\n        roles:[\n          {\n            value:0,\n            label:'发包方',\n          },\n          {\n            value:1,\n            label:'众包工人'\n          }\n        ]\n\t\t\t}\n\t\t\t\t\n\t\t},\n\t\tmethods:{\n\t\t\tchangeType() {\n\t\t\t\tthis.isLogin = !this.isLogin\n\t\t\t\tthis.form.username = ''\n\t\t\t\tthis.form.phonenumber = ''\n\t\t\t\tthis.form.userpwd = ''\n\t\t\t},\n      handleRegister(){\n        if(this.form.username !== \"\" && this.form.phonenumber !== \"\" && this.form.userpwd !== \"\") {\n          register({\n            phoneNumber: this.form.phonenumber,\n            password: this.form.userpwd,\n            role: this.form.role,\n            nickname: this.form.username\n          })\n              .then(res => {\n                if (res.response.code === 0) {\n                  // console.log(res.msg)\n                  // console.log(res.data)\n                  this.$router.push(\"/registerSucceed/\"+this.form.username)\n                } else {\n                  console.log(res.response.message)\n                }\n              });\n        }else{alert(\"填写不能为空！\");}\n      },\n      handleLogin(){\n        if (this.form.phonenumber !== \"\" && this.form.userpwd !== \"\") {\n          login({\n            phoneNumber: this.form.phonenumber,\n            password: this.form.userpwd\n\t\t\t\n          }).then(res =>{\n            console.log(res)\n            if(res.response.code === 0){\n              // console.log(res.msg)\n              // console.log(res.data)\n\t\t\n              window.localStorage.setItem(\"token\",res.token)\n              window.localStorage.setItem(\"nickname\",res.nickname)\n              window.localStorage.setItem(\"role\",res.role)\n              console.log(window.localStorage.getItem(\"nickname\"))\n              console.log(window.localStorage.getItem(\"role\"))\n              ElMessage({\n                message: \"登录成功\",\n                type: 'success',\n                onClose: () =>{ this.$router.push(\"/taskSquare\")}\n              })\n              setTimeout(()=>{\n                this.$router.go(0)\n              },4000)\n            }\n            else {\n              console.log(res.response.message)\n            }\n          })\n        }else {\n          alert(\"填写不能为空！\");\n        }\n      }\n\t\t},\n\n\t}\n</script>\n\n<style scoped=\"scoped\">\n\t.login-register{\n\t\twidth: 100vw;\n\t\theight: 100vh;\n\t\tbox-sizing: border-box;\n\t}\n\t.contain{\n\t\twidth: 60%;\n\t\theight: 60%;\n\t\tposition: relative;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%,-50%);\n\t\tbackground-color: #fff;\n\t\tborder-radius: 20px;\n\t\tbox-shadow: 0 0 3px #f0f0f0,\n\t\t\t\t\t0 0 6px #f0f0f0;\n\t}\n\t.big-box{\n\t\twidth: 70%;\n\t\theight: 100%;\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 30%;\n\t\ttransform: translateX(0%);\n\t\ttransition: all 1s;\n\t}\n\t.big-contain{\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\t.btitle{\n\t\tfont-size: 1.5em;\n\t\tfont-weight: bold;\n\t\tcolor: cadetblue;\n\t}\n\t.bform{\n\t\twidth: 100%;\n\t\theight: 40%;\n\t\tpadding: 2em 0;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-around;\n\t\talign-items: center;\n\t}\n\t.bform .errTips{\n\t\tdisplay: block;\n\t\twidth: 50%;\n\t\ttext-align: left;\n\t\tcolor: red;\n\t\tfont-size: 0.7em;\n\t\tmargin-left: 1em;\n\t}\n\t.bform input{\n\t\twidth: 50%;\n\t\theight: 30px;\n\t\tborder: none;\n\t\toutline: none;\n\t\tborder-radius: 10px;\n\t\tpadding-left: 2em;\n\t\tbackground-color: #f0f0f0;\n\t}\n\t.bbutton{\n\t\twidth: 20%;\n\t\theight: 40px;\n\t\tborder-radius: 24px;\n\t\tborder: none;\n\t\toutline: none;\n\t\tbackground-color: cadetblue;\n\t\tcolor: #fff;\n\t\tfont-size: 0.9em;\n\t\tcursor: pointer;\n\t}\n\t.small-box{\n\t\twidth: 30%;\n\t\theight: 100%;\n\t\tbackground: linear-gradient(135deg,cadetblue,rgb(186, 231, 235));\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\ttransform: translateX(0%);\n\t\ttransition: all 1s;\n\t\tborder-top-left-radius: inherit;\n\t\tborder-bottom-left-radius: inherit;\n\t}\n\t.small-contain{\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\t.stitle{\n\t\tfont-size: 1.5em;\n\t\tfont-weight: bold;\n\t\tcolor: #fff;\n\t}\n\t.scontent{\n\t\tfont-size: 0.8em;\n\t\tcolor: #fff;\n\t\ttext-align: center;\n\t\tpadding: 2em 4em;\n\t\tline-height: 1.7em;\n\t}\n\t.sbutton{\n\t\twidth: 60%;\n\t\theight: 40px;\n\t\tborder-radius: 24px;\n\t\tborder: 1px solid #fff;\n\t\toutline: none;\n\t\tbackground-color: transparent;\n\t\tcolor: #fff;\n\t\tfont-size: 0.9em;\n\t\tcursor: pointer;\n\t}\n\t\n\t.big-box.active{\n\t\tleft: 0;\n\t\ttransition: all 0.5s;\n\t}\n\t.small-box.active{\n\t\tleft: 100%;\n\t\tborder-top-left-radius: 0;\n\t\tborder-bottom-left-radius: 0;\n\t\tborder-top-right-radius: inherit;\n\t\tborder-bottom-right-radius: inherit;\n\t\ttransform: translateX(-100%);\n\t\ttransition: all 1s;\n\t}\n</style>"]},"metadata":{},"sourceType":"module"}