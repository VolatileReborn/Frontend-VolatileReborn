{"ast":null,"code":"import { defineComponent, ref, watch, provide, openBlock, createElementBlock, normalizeClass, renderSlot } from 'vue';\nimport '../../../constants/index.mjs';\nimport '../../../hooks/index.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { UPDATE_MODEL_EVENT, CHANGE_EVENT } from '../../../constants/event.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\n\nconst _sfc_main = defineComponent({\n  name: \"ElCollapse\",\n  props: {\n    accordion: Boolean,\n    modelValue: {\n      type: [Array, String, Number],\n      default: () => []\n    }\n  },\n  emits: [UPDATE_MODEL_EVENT, CHANGE_EVENT],\n\n  setup(props, {\n    emit\n  }) {\n    const ns = useNamespace(\"collapse\");\n    const activeNames = ref([].concat(props.modelValue));\n\n    const setActiveNames = _activeNames => {\n      activeNames.value = [].concat(_activeNames);\n      const value = props.accordion ? activeNames.value[0] : activeNames.value;\n      emit(UPDATE_MODEL_EVENT, value);\n      emit(CHANGE_EVENT, value);\n    };\n\n    const handleItemClick = name => {\n      if (props.accordion) {\n        setActiveNames((activeNames.value[0] || activeNames.value[0] === 0) && activeNames.value[0] === name ? \"\" : name);\n      } else {\n        const _activeNames = activeNames.value.slice(0);\n\n        const index = _activeNames.indexOf(name);\n\n        if (index > -1) {\n          _activeNames.splice(index, 1);\n        } else {\n          _activeNames.push(name);\n        }\n\n        setActiveNames(_activeNames);\n      }\n    };\n\n    watch(() => props.modelValue, () => {\n      activeNames.value = [].concat(props.modelValue);\n    }, {\n      deep: true\n    });\n    provide(\"collapse\", {\n      activeNames,\n      handleItemClick\n    });\n    return {\n      ns,\n      activeNames,\n      setActiveNames,\n      handleItemClick\n    };\n  }\n\n});\n\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass(_ctx.ns.b()),\n    role: \"tablist\",\n    \"aria-multiselectable\": \"true\"\n  }, [renderSlot(_ctx.$slots, \"default\")], 2);\n}\n\nvar Collapse = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\n\nexport { Collapse as default };","map":{"version":3,"mappings":";;;;;;;AAYA,MAAKA,YAAaC,gBAAa;AAC7BC,QAAM,YADuB;AAE7BC,SAAO;AACLC,eAAWC,OADN;AAELC,gBAAY;AACVC,YAAM,CAACC,KAAD,EAAQC,MAAR,EAAgBC,MAAhB,CADI;AAIVC,eAAS,MAAM;AAJL;AAFP,GAFsB;AAW7BC,SAAO,CAACC,kBAAD,EAAqBC,YAArB,CAXsB;;AAY7BC,QAAMZ,KAAN,EAAa;AAAEa;AAAF,GAAb,EAAuB;AACrB,UAAMC,KAAKC,aAAa,UAAb,CAAX;AACA,UAAMC,cAAcC,IAAI,GAAGC,MAAH,CAAUlB,MAAMG,UAAhB,CAAJ,CAApB;;AAEA,UAAMgB,iBAAkBC,YAAD,IAAkB;AACvCJ,kBAAYK,KAAZ,GAAoB,GAAGH,MAAH,CAAUE,YAAV,CAApB;AACA,YAAMC,QAAQrB,MAAMC,SAAN,GAAkBe,YAAYK,KAAZ,CAAkB,CAAlB,CAAlB,GAAyCL,YAAYK,KAAnE;AACAR,WAAKH,kBAAL,EAAyBW,KAAzB;AACAR,WAAKF,YAAL,EAAmBU,KAAnB;AAAmB,KAJrB;;AAOA,UAAMC,kBAAmBvB,IAAD,IAAU;AAChC,UAAIC,MAAMC,SAAV,EAAqB;AACnBkB,uBACG,aAAYE,KAAZ,CAAkB,CAAlB,KAAwBL,YAAYK,KAAZ,CAAkB,CAAlB,MAAyB,CAAjD,KACCL,YAAYK,KAAZ,CAAkB,CAAlB,MAAyBtB,IAD1B,GAEG,EAFH,GAGGA,IAJN;AAIM,OALR,MAOO;AACL,cAAMqB,eAAeJ,YAAYK,KAAZ,CAAkBE,KAAlB,CAAwB,CAAxB,CAArB;;AACA,cAAMC,QAAQJ,aAAaK,OAAb,CAAqB1B,IAArB,CAAd;;AAEA,YAAIyB,QAAQ,EAAZ,EAAgB;AACdJ,uBAAaM,MAAb,CAAoBF,KAApB,EAA2B,CAA3B;AAA2B,SAD7B,MAEO;AACLJ,uBAAaO,IAAb,CAAkB5B,IAAlB;AAAkB;;AAEpBoB,uBAAeC,YAAf;AAAe;AAAA,KAjBnB;;AAqBAQ,UACE,MAAM5B,MAAMG,UADd,EAEE,MAAM;AACJa,kBAAYK,KAAZ,GAAoB,GAAGH,MAAH,CAAUlB,MAAMG,UAAhB,CAApB;AAAoC,KAHxC,EAKE;AACE0B,YAAM;AADR,KALF;AAUAC,YAA0B,UAA1B,EAAsC;AACpCd,iBADoC;AAEpCM;AAFoC,KAAtC;AAKA,WAAO;AACLR,QADK;AAELE,iBAFK;AAGLG,oBAHK;AAILG;AAJK,KAAP;AAIE;;AA/DyB,CAAb,CAAlB;;;sBAXES,mBAEM,KAFNA,EAEM;AAFAC,WAAKC,eAAEC,QAAGC,CAAH,EAAFF,CAEL;AAFeG,UAAK,SAEpB;AAF8B,4BAAqB;AAEnD,GAFNL,EAAyD,CACvDM,WAAaH,WAAbG,EAAa,SAAbA,CADuD,CAAzDN,EACe,CADfA","names":["_sfc_main","defineComponent","name","props","accordion","Boolean","modelValue","type","Array","String","Number","default","emits","UPDATE_MODEL_EVENT","CHANGE_EVENT","setup","emit","ns","useNamespace","activeNames","ref","concat","setActiveNames","_activeNames","value","handleItemClick","slice","index","indexOf","splice","push","watch","deep","provide","_createElementBlock","class","_normalizeClass","_ctx","b","role","_renderSlot"],"sources":["../../../../../../packages/components/collapse/src/collapse.vue"],"sourcesContent":["<template>\n  <div :class=\"ns.b()\" role=\"tablist\" aria-multiselectable=\"true\">\n    <slot></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, watch, provide } from 'vue'\nimport { UPDATE_MODEL_EVENT, CHANGE_EVENT } from '@element-plus/constants'\nimport { useNamespace } from '@element-plus/hooks'\nimport type { CollapseProvider } from './collapse.type'\n\nexport default defineComponent({\n  name: 'ElCollapse',\n  props: {\n    accordion: Boolean,\n    modelValue: {\n      type: [Array, String, Number] as PropType<\n        string | number | Array<string | number>\n      >,\n      default: () => [],\n    },\n  },\n  emits: [UPDATE_MODEL_EVENT, CHANGE_EVENT],\n  setup(props, { emit }) {\n    const ns = useNamespace('collapse')\n    const activeNames = ref([].concat(props.modelValue))\n\n    const setActiveNames = (_activeNames) => {\n      activeNames.value = [].concat(_activeNames)\n      const value = props.accordion ? activeNames.value[0] : activeNames.value\n      emit(UPDATE_MODEL_EVENT, value)\n      emit(CHANGE_EVENT, value)\n    }\n\n    const handleItemClick = (name) => {\n      if (props.accordion) {\n        setActiveNames(\n          (activeNames.value[0] || activeNames.value[0] === 0) &&\n            activeNames.value[0] === name\n            ? ''\n            : name\n        )\n      } else {\n        const _activeNames = activeNames.value.slice(0)\n        const index = _activeNames.indexOf(name)\n\n        if (index > -1) {\n          _activeNames.splice(index, 1)\n        } else {\n          _activeNames.push(name)\n        }\n        setActiveNames(_activeNames)\n      }\n    }\n\n    watch(\n      () => props.modelValue,\n      () => {\n        activeNames.value = [].concat(props.modelValue)\n      },\n      {\n        deep: true,\n      }\n    )\n\n    provide<CollapseProvider>('collapse', {\n      activeNames,\n      handleItemClick,\n    })\n\n    return {\n      ns,\n      activeNames,\n      setActiveNames,\n      handleItemClick,\n    }\n  },\n})\n</script>\n"]},"metadata":{},"sourceType":"module"}