{"ast":null,"code":"import { Edit } from \"@element-plus/icons-vue\";\nimport { ElMessage } from \"element-plus\";\nimport { acceptTask } from \"@/api/task\";\nimport { employeeTaskDetail } from \"@/api/square\";\nimport { employerTaskDetail } from \"@/api/square\";\nexport default {\n  name: \"TaskInfoFromSquare\",\n\n  data() {\n    return {\n      taskId: this.$route.params.taskId,\n      task: {// taskId: 0,\n        // taskName: 'test_task',\n        // taskType: 0,\n        // workerNumTotal: 10,\n        // workerNumLeft: 5,\n        // taskStartTime: '2022-3-1',\n        // taskEndTime: '2022-5-3',\n        // taskState: true,\n        // taskIntroduction: '这是一个测试任务',\n      },\n      isSelected: false,\n      isAble: this.taskState || window.localStorage.getItem(\"role\") === '1' || this.isSelected\n    };\n  },\n\n  mounted() {\n    if (window.localStorage.getItem(\"role\") === '1') {\n      employeeTaskDetail({\n        token: window.localStorage.getItem(\"token\"),\n        taskId: this.taskId\n      }).then(res => {\n        if (res.code === 1) {\n          this.task = res.data.task;\n          this.isSelected = res.data.isSelected;\n        }\n      });\n    } else if (window.localStorage.getItem(\"role\") === '0') {\n      employerTaskDetail({\n        token: window.localStorage.getItem(\"userToken\"),\n        taskId: this.taskId\n      }).then(res => {\n        if (res.code === 1) {\n          console.log(res.msg);\n          this.task = res.data.task;\n        } else {\n          console.log(res.msg);\n        }\n      });\n    }\n  },\n\n  components: {\n    Edit\n  },\n  methods: {\n    enroll() {\n      const token = window.localStorage.getItem(\"token\");\n      acceptTask({\n        token: token,\n        taskId: this.taskId\n      }).then(res => {\n        if (res.code === 1) {\n          this.$router.push(\"/taskEnrollSucceed\");\n          console.log(res.msg);\n          console.log(res.data);\n        } else {\n          console.log(res.msg);\n        }\n      });\n    },\n\n    showEnrollError() {\n      ElMessage.error('非常抱歉，报名已经结束，看看其他项目吧');\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAuCA,SAAQA,IAAR,QAAmB,yBAAnB;AACA,SAAQC,SAAR,QAAwB,cAAxB;AACA,SAAQC,UAAR,QAAyB,YAAzB;AACA,SAAQC,kBAAR,QAAiC,cAAjC;AACA,SAAQC,kBAAR,QAAiC,cAAjC;AACA,eAAe;AACbC,MAAI,EAAE,oBADO;;AAEbC,MAAI,GAAG;AACL,WAAO;AACLC,YAAM,EAAE,KAAKC,MAAL,CAAYC,MAAZ,CAAmBF,MADtB;AAELG,UAAI,EAAE,CACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATI,OAFD;AAaLC,gBAAU,EAAE,KAbP;AAcLC,YAAM,EAAE,KAAKC,SAAL,IAAkBC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,MAAwC,GAA1D,IAAiE,KAAKL;AAdzE,KAAP;AAgBD,GAnBY;;AAoBbM,SAAO,GAAG;AACR,QAAGH,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,MAAsC,GAAzC,EACA;AACEb,wBAAkB,CAAC;AAACe,aAAK,EAACJ,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CAAP;AAA4CT,cAAM,EAAC,KAAKA;AAAxD,OAAD,CAAlB,CACCY,IADD,CACMC,GAAE,IAAK;AACX,YAAGA,GAAG,CAACC,IAAJ,KAAa,CAAhB,EACA;AACE,eAAKX,IAAL,GAAYU,GAAG,CAACd,IAAJ,CAASI,IAArB;AACA,eAAKC,UAAL,GAAkBS,GAAG,CAACd,IAAJ,CAASK,UAA3B;AACF;AACD,OAPD;AAQF,KAVA,MAWK,IAAGG,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,MAAwC,GAA3C,EACL;AACEZ,wBAAkB,CAAC;AAACc,aAAK,EAACJ,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAAP;AAAgDT,cAAM,EAAC,KAAKA;AAA5D,OAAD,CAAlB,CACCY,IADD,CACMC,GAAE,IAAK;AACX,YAAGA,GAAG,CAACC,IAAJ,KAAa,CAAhB,EACA;AACEC,iBAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,GAAhB;AACA,eAAKd,IAAL,GAAYU,GAAG,CAACd,IAAJ,CAASI,IAArB;AACF,SAJA,MAKK;AACHY,iBAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,GAAhB;AACF;AACD,OAVD;AAWF;AACD,GA9CY;;AA+CbC,YAAU,EAAE;AACVzB;AADU,GA/CC;AAkDb0B,SAAO,EAAE;AACPC,UAAM,GAAE;AACN,YAAMT,KAAI,GAAIJ,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CAAd;AACAd,gBAAU,CAAC;AAACgB,aAAK,EAACA,KAAP;AAAaX,cAAM,EAAC,KAAKA;AAAzB,OAAD,CAAV,CACCY,IADD,CACMC,GAAE,IAAK;AACX,YAAGA,GAAG,CAACC,IAAJ,KAAa,CAAhB,EAAkB;AAChB,eAAKO,OAAL,CAAaC,IAAb,CAAkB,oBAAlB;AACAP,iBAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,GAAhB;AACAF,iBAAO,CAACC,GAAR,CAAYH,GAAG,CAACd,IAAhB;AACF,SAJA,MAKK;AACHgB,iBAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,GAAhB;AACF;AACD,OAVD;AAWD,KAdM;;AAePM,mBAAe,GAAE;AACf7B,eAAS,CAAC8B,KAAV,CAAgB,qBAAhB;AACF;;AAjBO;AAlDI,CAAf","names":["Edit","ElMessage","acceptTask","employeeTaskDetail","employerTaskDetail","name","data","taskId","$route","params","task","isSelected","isAble","taskState","window","localStorage","getItem","mounted","token","then","res","code","console","log","msg","components","methods","enroll","$router","push","showEnrollError","error"],"sourceRoot":"","sources":["D:\\download\\大三\\大三下\\1 软工三\\project\\第一阶段\\frontend\\frontend-volatile\\src\\views\\task\\TaskInfoFromSquare.vue"],"sourcesContent":["<template>\r\n  <el-divider></el-divider>\r\n  <el-breadcrumb separator=\"/\"  class=\"breadcrumb\">\r\n    <el-breadcrumb-item :to=\"{path: '/TaskSquare'}\">任务广场</el-breadcrumb-item>\r\n    <el-breadcrumb-item>任务详情</el-breadcrumb-item>\r\n  </el-breadcrumb>\r\n  <div class=\"container\">\r\n  <el-card class=\"box_card\">\r\n    <template #header>\r\n      <div class=\"card_header\">\r\n        <span style=\"font-size: larger\">{{task.taskName}}</span>\r\n        <div class=\"header_tags\">\r\n         <el-tag class=\"header_tag\" type=\"warning\">竞标中</el-tag>\r\n          <el-tag v-if=\"task.taskType === 0\" style=\"margin-left: 10px\">功能测试</el-tag>\r\n          <el-tag v-if=\"task.taskType === 1\" style=\"margin-left: 10px\" type=\"success\">性能测试</el-tag>\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <div class=\"information\">\r\n      <div>发布日期 ： {{task.taskStartTime}}</div>\r\n      <div style=\"margin-top: 5px\">结束日期 ： {{task.taskEndTime}}</div>\r\n      <div style=\"margin-top: 5px\">参与人员 ： 剩余 {{task.workerNumLeft}}  人  |  总需  {{task.workerNumTotal}} 人</div>\r\n    </div>\r\n    <div class=\"need_information\">\r\n      <div style=\"display: flex;flex-direction: row;margin-top:20px\">\r\n      <el-icon color=\"#409efc\" :size=\"30\">\r\n        <edit />\r\n      </el-icon>\r\n        <div style=\"font-size: large;margin-top: 2px;font-weight: bolder;margin-left: 5px\">需求描述</div>\r\n      </div>\r\n      <div style=\"margin-top: 10px\">任务简介 ： {{task.taskIntroduction}}</div>\r\n    </div>\r\n    <el-button v-if=\"isAble\" type=\"danger\" round class=\"check_btn\" size=\"large\" @click=\"enroll()\" >我要报名</el-button>\r\n    <el-button v-else type=\"info\" round class=\"check_btn\" size=\"large\" @click=\"showEnrollError()\" plain>我要报名</el-button>\r\n  </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {Edit} from \"@element-plus/icons-vue\"\r\nimport {ElMessage} from \"element-plus\";\r\nimport {acceptTask} from \"@/api/task\";\r\nimport {employeeTaskDetail} from \"@/api/square\";\r\nimport {employerTaskDetail} from \"@/api/square\";\r\nexport default {\r\n  name: \"TaskInfoFromSquare\",\r\n  data() {\r\n    return {\r\n      taskId: this.$route.params.taskId,\r\n      task: {\r\n        // taskId: 0,\r\n        // taskName: 'test_task',\r\n        // taskType: 0,\r\n        // workerNumTotal: 10,\r\n        // workerNumLeft: 5,\r\n        // taskStartTime: '2022-3-1',\r\n        // taskEndTime: '2022-5-3',\r\n        // taskState: true,\r\n        // taskIntroduction: '这是一个测试任务',\r\n      },\r\n      isSelected: false,\r\n      isAble: this.taskState || window.localStorage.getItem(\"role\") === '1' || this.isSelected\r\n    }\r\n  },\r\n  mounted() {\r\n    if(window.localStorage.getItem(\"role\")==='1')\r\n    {\r\n      employeeTaskDetail({token:window.localStorage.getItem(\"token\"),taskId:this.taskId})\r\n      .then(res => {\r\n        if(res.code === 1)\r\n        {\r\n          this.task = res.data.task\r\n          this.isSelected = res.data.isSelected\r\n        }\r\n      })\r\n    }\r\n    else if(window.localStorage.getItem(\"role\") === '0')\r\n    {\r\n      employerTaskDetail({token:window.localStorage.getItem(\"userToken\"),taskId:this.taskId})\r\n      .then(res => {\r\n        if(res.code === 1)\r\n        {\r\n          console.log(res.msg)\r\n          this.task = res.data.task\r\n        }\r\n        else {\r\n          console.log(res.msg)\r\n        }\r\n      })\r\n    }\r\n  },\r\n  components: {\r\n    Edit\r\n  },\r\n  methods: {\r\n    enroll(){\r\n      const token = window.localStorage.getItem(\"token\")\r\n      acceptTask({token:token,taskId:this.taskId})\r\n      .then(res => {\r\n        if(res.code === 1){\r\n          this.$router.push(\"/taskEnrollSucceed\")\r\n          console.log(res.msg)\r\n          console.log(res.data)\r\n        }\r\n        else {\r\n          console.log(res.msg)\r\n        }\r\n      })\r\n    },\r\n    showEnrollError(){\r\n      ElMessage.error('非常抱歉，报名已经结束，看看其他项目吧');\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.breadcrumb{\r\n  margin-left: 20px;\r\n  font-family: 幼圆;\r\n  font-size: medium;\r\n  margin-top: -10px;\r\n}\r\n.box_card{\r\n  width: 90%;\r\n  margin-top: 10px;\r\n  margin-left: 5%;\r\n  height: 450px;\r\n}\r\n.card_header{\r\n  margin-left: 5px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.header_tags{\r\n  display: flex;\r\n  flex-direction: row;\r\n  margin-top: 5px;\r\n}\r\n.information{\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.check_btn{\r\n  position: absolute;\r\n  right: 90px;\r\n  bottom: 65px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}