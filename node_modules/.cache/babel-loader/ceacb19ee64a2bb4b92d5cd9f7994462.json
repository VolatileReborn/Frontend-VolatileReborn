{"ast":null,"code":"import { FolderChecked } from \"@element-plus/icons-vue\";\nimport oss from \"@/utils/oss\";\nimport { Edit } from \"@element-plus/icons-vue\";\nimport { StarFilled } from \"@element-plus/icons-vue\";\nimport { employeeGetReportInfo } from \"@/api/report\";\nimport { employerGetReportInfo } from \"@/api/report\";\nexport default {\n  name: \"ReportInfo\",\n\n  data() {\n    return {\n      taskReport: {\n        defectExplain: '',\n        defectReproduction: '',\n        testEquipmentInfo: '',\n        defectPictureList: []\n      },\n      isAble: !this.taskState,\n      reportId: this.$route.params.reportId,\n      workerId: -1\n    };\n  },\n\n  components: {\n    FolderChecked,\n    Edit,\n    StarFilled // ReportItem\n\n  },\n  methods: {\n    getPicReview(fileUrl) {\n      const reviewUrl = oss.ossGetReviewUrl(fileUrl.substr(49));\n      return reviewUrl;\n    }\n\n  },\n\n  mounted() {\n    if (window.localStorage.getItem(\"role\") === '1') {\n      employeeGetReportInfo({\n        taskId: this.$route.params.taskId,\n        reportId: this.reportId,\n        token: window.localStorage.getItem(\"token\")\n      }).then(res => {\n        if (res.response.code === 0) {\n          this.taskReport = res.taskReport;\n        }\n      });\n    } else {\n      if (window.localStorage.getItem(\"role\") === '0' || window.localStorage.getItem(\"role\") === '2') {\n        employerGetReportInfo({\n          taskId: this.$route.params.taskId,\n          reportId: this.reportId,\n          token: window.localStorage.getItem(\"token\")\n        }).then(res => {\n          if (res.response.code === 0) {\n            this.taskReport = res.taskReport;\n            this.workerId = res.workerId;\n          }\n        });\n      }\n    }\n  }\n\n};","map":{"version":3,"mappings":"AA+DA,SAAQA,aAAR,QAA4B,yBAA5B;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAAQC,IAAR,QAAmB,yBAAnB;AACA,SAAQC,UAAR,QAAyB,yBAAzB;AACA,SAAQC,qBAAR,QAAoC,cAApC;AACA,SAAQC,qBAAR,QAAoC,cAApC;AACA,eAAe;AACbC,MAAI,EAAE,YADO;;AAEbC,MAAI,GAAG;AACL,WAAO;AACLC,gBAAU,EAAE;AACVC,qBAAa,EAAC,EADJ;AAEhBC,0BAAkB,EAAC,EAFH;AAGhBC,yBAAiB,EAAC,EAHF;AAIVC,yBAAiB,EAAC;AAJR,OADP;AAOLC,YAAM,EAAE,CAAC,KAAKC,SAPT;AAQLC,cAAQ,EAAE,KAAKC,MAAL,CAAYC,MAAZ,CAAmBF,QARxB;AASLG,cAAQ,EAAC,CAAC;AATL,KAAP;AAWD,GAdY;;AAebC,YAAU,EAAE;AACVnB,iBADU;AAEVE,QAFU;AAGVC,cAHU,CAIV;;AAJU,GAfC;AAqBbiB,SAAO,EAAE;AACPC,gBAAY,CAACC,OAAD,EAAS;AACnB,YAAMC,SAAQ,GAAItB,GAAG,CAACuB,eAAJ,CAAoBF,OAAO,CAACG,MAAR,CAAe,EAAf,CAApB,CAAlB;AACA,aAAOF,SAAP;AACF;;AAJO,GArBI;;AA2BbG,SAAO,GAAE;AACP,QAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,MAAwC,GAA3C,EAAgD;AAC9CzB,2BAAqB,CAAC;AACpB0B,cAAM,EAAE,KAAKd,MAAL,CAAYC,MAAZ,CAAmBa,MADP;AAEpBf,gBAAQ,EAAE,KAAKA,QAFK;AAGpBgB,aAAK,EAAEJ,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B;AAHa,OAAD,CAArB,CAKKG,IALL,CAKUC,GAAE,IAAK;AACX,YAAIA,GAAG,CAACC,QAAJ,CAAaC,IAAb,KAAsB,CAA1B,EAA6B;AAC3B,eAAK3B,UAAL,GAAkByB,GAAG,CAACzB,UAAtB;AACF;AACD,OATL;AAUF,KAXA,MAYK;AACH,UAAGmB,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,MAAwC,GAAxC,IAA+CF,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,MAAwC,GAA1F,EAA+F;AAC7FxB,6BAAqB,CAAC;AACpByB,gBAAM,EAAC,KAAKd,MAAL,CAAYC,MAAZ,CAAmBa,MADN;AAEpBf,kBAAQ,EAAC,KAAKA,QAFM;AAGpBgB,eAAK,EAACJ,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B;AAHc,SAAD,CAArB,CAKGG,IALH,CAKQC,GAAE,IAAK;AACX,cAAGA,GAAG,CAACC,QAAJ,CAAaC,IAAb,KAAsB,CAAzB,EACA;AACE,iBAAK3B,UAAL,GAAkByB,GAAG,CAACzB,UAAtB;AACA,iBAAKU,QAAL,GAAgBe,GAAG,CAACf,QAApB;AACF;AACD,SAXH;AAYF;AACF;AACF;;AAxDa,CAAf","names":["FolderChecked","oss","Edit","StarFilled","employeeGetReportInfo","employerGetReportInfo","name","data","taskReport","defectExplain","defectReproduction","testEquipmentInfo","defectPictureList","isAble","taskState","reportId","$route","params","workerId","components","methods","getPicReview","fileUrl","reviewUrl","ossGetReviewUrl","substr","mounted","window","localStorage","getItem","taskId","token","then","res","response","code"],"sourceRoot":"","sources":["/home/lyk/Projects/Volatile/frontend-volatile/src/views/report/ReportInfo.vue"],"sourcesContent":["<template>\n  <el-divider></el-divider>\n  <el-breadcrumb separator=\"/\"  class=\"breadcrumb\">\n    <el-breadcrumb-item :to=\"{path: '/'}\">个人中心</el-breadcrumb-item>\n    <el-breadcrumb-item>测试报告详情</el-breadcrumb-item>\n  </el-breadcrumb>\n  <div class=\"container\">\n    <el-card class=\"box_card\">\n      <template #header>\n        <div style=\"display: flex;flex-direction: column\">\n          <div><span style=\"font-weight: bolder\">测试报告</span></div>\n          <div style=\"font-size: small;color:#9A9A9A\" v-if=\"workerId !== -1\">测试工人ID: {{this.workerId}}</div>\n        </div>\n      </template>\n      <div class=\"need_information\">\n        <div style=\"display: flex;flex-direction: row;margin-top:20px\">\n          <el-icon color=\"#409efc\" :size=\"30\">\n            <edit />\n          </el-icon>\n          <div style=\"font-size: large;margin-top: 2px;font-weight: bolder;margin-left: 5px\">缺陷情况详情 </div>\n        </div>\n        <div style=\"margin-top: 10px\"> <span style=\"font-weight: bold\">{{taskReport.defectExplain}}</span></div>\n      </div>\n      <div class=\"need_information\">\n        <div style=\"display: flex;flex-direction: row;margin-top:20px\">\n          <el-icon color=\"#409efc\" :size=\"30\">\n            <edit />\n          </el-icon>\n          <div style=\"font-size: large;margin-top: 2px;font-weight: bolder;margin-left: 5px\">缺陷复现步骤 </div>\n        </div>\n        <div style=\"margin-top: 10px\"> <span style=\"font-weight: bold\">{{taskReport.defectReproduction}}</span></div>\n      </div>\n\n      <div class=\"need_information\">\n        <div style=\"display: flex;flex-direction: row;margin-top:20px\">\n          <el-icon color=\"#409efc\" :size=\"30\">\n            <edit />\n          </el-icon>\n          <div style=\"font-size: large;margin-top: 2px;font-weight: bolder;margin-left: 5px\">测试设备信息</div>\n        </div>\n        <div style=\"margin-top: 10px\"> <span style=\"font-weight: bold\">{{taskReport.testEquipmentInfo}}</span></div>\n      </div>\n\n      <div class=\"file_information\" >\n        <div style=\"display: flex;flex-direction: row;margin-top:20px\">\n          <el-icon color=\"#409efc\" :size=\"30\">\n            <folder-checked />\n          </el-icon>\n          <div style=\"font-size: large;margin-top: 2px;font-weight: bolder;margin-left: 5px\">缺陷应用截图</div>\n        </div>\n          <div style=\"display:flex;flex-direction: row\">\n            <div v-for=\"item in taskReport.defectPictureList\"\n                 v-bind:key=\"item.fileName\" >\n              <img :src=\"getPicReview(item.fileURL)\"  alt=\"\" style=\"width: 50px\"/>\n            </div>\n          </div>\n      </div>\n      <el-divider ><el-icon><star-filled /></el-icon></el-divider>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport {FolderChecked} from \"@element-plus/icons-vue\"\nimport oss from \"@/utils/oss\"\nimport {Edit} from \"@element-plus/icons-vue\"\nimport {StarFilled} from \"@element-plus/icons-vue\"\nimport {employeeGetReportInfo} from \"@/api/report\";\nimport {employerGetReportInfo} from \"@/api/report\";\nexport default {\n  name: \"ReportInfo\",\n  data() {\n    return {\n      taskReport: {\n        defectExplain:'',\n\t\tdefectReproduction:'',\n\t\ttestEquipmentInfo:'',\n        defectPictureList:[]\n      },\n      isAble: !this.taskState,\n      reportId: this.$route.params.reportId,\n      workerId:-1\n    }\n  },\n  components: {\n    FolderChecked,\n    Edit,\n    StarFilled,\n    // ReportItem\n  },\n  methods: {\n    getPicReview(fileUrl){\n      const reviewUrl = oss.ossGetReviewUrl(fileUrl.substr(49))\n      return reviewUrl\n    }\n  },\n  mounted(){\n    if(window.localStorage.getItem(\"role\") === '1') {\n      employeeGetReportInfo({\n        taskId: this.$route.params.taskId,\n        reportId: this.reportId,\n        token: window.localStorage.getItem(\"token\")\n      })\n          .then(res => {\n            if (res.response.code === 0) {\n              this.taskReport = res.taskReport\n            }\n          })\n    }\n    else {\n      if(window.localStorage.getItem(\"role\") === '0' || window.localStorage.getItem(\"role\") === '2') {\n        employerGetReportInfo({\n          taskId:this.$route.params.taskId,\n          reportId:this.reportId,\n          token:window.localStorage.getItem(\"token\")\n        })\n          .then(res => {\n            if(res.response.code === 0)\n            {\n              this.taskReport = res.taskReport\n              this.workerId = res.workerId\n            }\n          })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.breadcrumb{\n  margin-left: 20px;\n  font-family: 幼圆;\n  font-size: medium;\n  margin-top: -10px;\n}\n.box_card{\n  width: 90%;\n  margin-top: 10px;\n  margin-left: 5%;\n}\n.card_header{\n  margin-left: 5px;\n  display: flex;\n  flex-direction: column;\n}\n.header_tags{\n  display: flex;\n  flex-direction: row;\n  margin-top: 5px;\n}\n.information{\n  display: flex;\n  flex-direction: column;\n}\n.check_btn{\n  position: absolute;\n  right: 90px;\n  bottom: 65px;\n}\n</style>"]},"metadata":{},"sourceType":"module"}