{"ast":null,"code":"import { FolderChecked } from \"@element-plus/icons-vue\";\nimport { ElMessage } from \"element-plus\";\nimport { Edit } from \"@element-plus/icons-vue\";\nimport { StarFilled } from \"@element-plus/icons-vue\";\nimport { employerBrowserTaskDetail } from \"@/api/task\";\nimport oss from \"@/utils/oss\";\n\nconst goReport = val => {\n  console.log(\"reportId=\" + val.reportId);\n};\n\nexport default {\n  name: \"TaskInfoFromUser\",\n\n  data() {\n    return {\n      taskId: this.$route.params.taskId,\n      task: {\n        taskId: this.taskId,\n        taskName: '',\n        taskType: 0,\n        workerNumTotal: 0,\n        workerNumLeft: 0,\n        taskStartTime: '',\n        taskEndTime: '',\n        taskState: true,\n        taskIntroduction: '',\n        requirementDescriptionFileList: [],\n        executableFileList: [],\n        is_selected: false,\n        //todo:reportList数据获取\n        reportList: [{\n          reportId: 0,\n          reportName: 'test_report1',\n          defectExplain: '测试报告缺陷说明'\n        }, {\n          reportId: 1,\n          reportName: 'test_report1',\n          defectExplain: '测试报告缺陷说明'\n        }, {\n          reportId: 2,\n          reportName: 'test_report1',\n          defectExplain: '测试报告缺陷说明'\n        }, {\n          reportId: 3,\n          reportName: 'test_report1',\n          defectExplain: '测试报告缺陷说明'\n        }, {\n          reportId: 4,\n          reportName: 'test_report1',\n          defectExplain: '测试报告缺陷说明'\n        }, {\n          reportId: 5,\n          reportName: 'test_report1',\n          defectExplain: '测试报告缺陷说明'\n        }]\n      },\n      isAble: !this.taskState,\n      role: window.localStorage.getItem(\"role\"),\n      exeUrl: '',\n      exeName: '',\n      docUrl: '',\n      docName: ''\n    };\n  },\n\n  components: {\n    FolderChecked,\n    Edit,\n    StarFilled // ReportItem\n\n  },\n  methods: {\n    enroll() {\n      this.$router.push(\"/taskEnrollSucceed\");\n    },\n\n    showEnrollError() {\n      ElMessage.error('非常抱歉，报名已经结束，看看其他项目吧');\n    },\n\n    downloadExe() {\n      oss.ossGetDownloadUrl(this.task.executableFileList[0].fileURL.substr(49)).then(res => {\n        this.exeUrl = res.downloadURL;\n        this.exeName = this.task.executableFileList[0].fileName;\n        console.log(this.exeUrl);\n        console.log(this.exeName);\n      });\n    },\n\n    downloadDoc() {\n      oss.ossGetDownloadUrl(this.task.requirementDescriptionFileList[0].fileURL.substr(49)).then(res => {\n        this.docUrl = res.downloadURL;\n        this.docName = this.task.requirementDescriptionFileList[0].fileName;\n        console.log(this.docUrl);\n        console.log(this.docName);\n      });\n    },\n\n    goReport\n  },\n\n  mounted() {\n    if (this.role === '0') {\n      employerBrowserTaskDetail({\n        token: window.localStorage.getItem(\"token\"),\n        taskId: this.taskId\n      }).then(res => {\n        if (res.code === 1) {\n          console.log(res.msg);\n          this.task.workerNumTotal = res.data.workerNumTotal;\n          this.task.taskState = res.data.taskState;\n          this.task.workerNumLeft = res.data.workerNumLeft;\n          this.task.requirementDescriptionFileList = res.data.requirementDescriptionFileList;\n          this.task.executableFileList = res.data.executableFileList;\n          this.task.taskName = res.data.taskName;\n          this.task.taskIntroduction = res.data.taskIntroduction;\n          this.task.taskStartTime = res.data.beginTime;\n          this.task.taskEndTime = res.data.endTime;\n        }\n      });\n    }\n  }\n\n};","map":{"version":3,"mappings":"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","names":["FolderChecked","ElMessage","Edit","StarFilled","employerBrowserTaskDetail","oss","goReport","val","console","log","reportId","name","data","taskId","$route","params","task","taskName","taskType","workerNumTotal","workerNumLeft","taskStartTime","taskEndTime","taskState","taskIntroduction","requirementDescriptionFileList","executableFileList","is_selected","reportList","reportName","defectExplain","isAble","role","window","localStorage","getItem","exeUrl","exeName","docUrl","docName","components","methods","enroll","$router","push","showEnrollError","error","downloadExe","ossGetDownloadUrl","fileURL","substr","then","res","downloadURL","fileName","downloadDoc","mounted","token","code","msg","beginTime","endTime"],"sourceRoot":"","sources":["D:\\latest\\frontend-volatile\\src\\views\\task\\TaskInfoFromUser.vue"],"sourcesContent":["<template>\r\n  <el-divider></el-divider>\r\n  <el-breadcrumb separator=\"/\"  class=\"breadcrumb\">\r\n    <el-breadcrumb-item :to=\"{path: '/TaskSquare'}\">个人中心</el-breadcrumb-item>\r\n    <el-breadcrumb-item>任务详情</el-breadcrumb-item>\r\n  </el-breadcrumb>\r\n  <div class=\"container\">\r\n    <el-card class=\"box_card\">\r\n      <template #header>\r\n        <div class=\"card_header\">\r\n          <span style=\"font-size: larger\">{{task.taskName}}</span>\r\n          <div class=\"header_tags\">\r\n            <el-tag class=\"header_tag\" type=\"warning\">竞标中</el-tag>\r\n            <el-tag v-if=\"task.taskType === 0\" style=\"margin-left: 10px\">功能测试</el-tag>\r\n            <el-tag v-if=\"task.taskType === 1\" style=\"margin-left: 10px\" type=\"success\">性能测试</el-tag>\r\n          </div>\r\n        </div>\r\n      </template>\r\n      <div class=\"information\">\r\n        <div>发布日期 ： {{task.taskStartTime}}</div>\r\n        <div style=\"margin-top: 5px\">结束日期 ： {{task.taskEndTime}}</div>\r\n        <div style=\"margin-top: 5px\">参与人员 ： 剩余 <span style=\"font-weight: bold;color:#409efc \">{{task.workerNumLeft}}</span>  人  <el-divider direction=\"vertical\" ></el-divider>  总需  <span style=\"font-weight: bold;color:#409efc \">{{task.workerNumTotal}}</span> 人</div>\r\n      </div>\r\n      <div class=\"need_information\">\r\n        <div style=\"display: flex;flex-direction: row;margin-top:20px\">\r\n          <el-icon color=\"#409efc\" :size=\"30\">\r\n            <edit />\r\n          </el-icon>\r\n          <div style=\"font-size: large;margin-top: 2px;font-weight: bolder;margin-left: 5px\">需求描述</div>\r\n        </div>\r\n        <div style=\"margin-top: 10px\">任务简介 ： <span style=\"font-weight: bold\">{{task.taskIntroduction}}</span></div>\r\n      </div>\r\n      <div class=\"file_information\" >\r\n        <div style=\"display: flex;flex-direction: row;margin-top:20px\">\r\n          <el-icon color=\"#409efc\" :size=\"30\">\r\n            <folder-checked />\r\n          </el-icon>\r\n          <div style=\"font-size: large;margin-top: 2px;font-weight: bolder;margin-left: 5px\">附件下载</div>\r\n        </div>\r\n          <div>\r\n          <a :href=\"exeUrl\" :download=\"exeName\">\r\n            <el-button type=\"text\" @click=\"downloadExe\">一、点击下载待测应用可执行文件</el-button>\r\n          </a>\r\n            <a :href=\"docUrl\" :download=\"docName\">\r\n          <el-button type=\"text\" @click=\"downloadDoc\">二、点击下载测试需求描述文件</el-button>\r\n            </a>\r\n          </div>\r\n      </div>\r\n      <div ><el-button v-if=\"role === '1'\" type=\"danger\" style=\"margin-right:500px\">提交报告</el-button></div>\r\n      <el-divider ><el-icon><star-filled /></el-icon></el-divider>\r\n      <div class=\"report_container\" v-if=\"role === '0'\">\r\n        <el-row>\r\n          <el-col :span=\"15\"><span style=\"font-weight: bolder\">报告展示</span></el-col>\r\n          <el-col :span=\"5\">\r\n\r\n          </el-col>\r\n        </el-row>\r\n        <el-table :data=\"task.reportList\" height=\"250\" style=\"width:1500px;margin-top: 10px\" stripe border highlight-current-row @current-change=\"goReport\">\r\n          <el-table-column prop=\"reportId\" label=\"报告ID\" width=\"180\" />\r\n          <el-table-column prop=\"reportName\" label=\"报告名称\" width=\"180\" />\r\n          <el-table-column prop=\"defectExplain\" label=\"缺陷说明\" />\r\n        </el-table>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {FolderChecked} from \"@element-plus/icons-vue\"\r\nimport {ElMessage} from \"element-plus\";\r\nimport {Edit} from \"@element-plus/icons-vue\"\r\nimport {StarFilled} from \"@element-plus/icons-vue\"\r\nimport {employerBrowserTaskDetail} from \"@/api/task\";\r\nimport oss from \"@/utils/oss\"\r\n\r\nconst goReport = (val) =>{\r\n  console.log(\"reportId=\"+val.reportId)\r\n\r\n}\r\n\r\nexport default {\r\n  name: \"TaskInfoFromUser\",\r\n  data() {\r\n    return {\r\n      taskId: this.$route.params.taskId,\r\n      task: {\r\n        taskId: this.taskId,\r\n        taskName: '',\r\n        taskType: 0,\r\n        workerNumTotal: 0,\r\n        workerNumLeft: 0,\r\n        taskStartTime: '',\r\n        taskEndTime: '',\r\n        taskState: true,\r\n        taskIntroduction: '',\r\n        requirementDescriptionFileList:[],\r\n        executableFileList:[],\r\n        is_selected: false,\r\n        //todo:reportList数据获取\r\n        reportList:[\r\n          {\r\n            reportId:0,reportName:'test_report1',defectExplain:'测试报告缺陷说明'\r\n          },\r\n          {\r\n            reportId:1,reportName:'test_report1',defectExplain:'测试报告缺陷说明'\r\n          },\r\n          {\r\n            reportId:2,reportName:'test_report1',defectExplain:'测试报告缺陷说明'\r\n          },\r\n          {\r\n            reportId:3,reportName:'test_report1',defectExplain:'测试报告缺陷说明'\r\n          },\r\n          {\r\n            reportId:4,reportName:'test_report1',defectExplain:'测试报告缺陷说明'\r\n          },\r\n          {\r\n            reportId:5,reportName:'test_report1',defectExplain:'测试报告缺陷说明'\r\n          },\r\n        ]\r\n      },\r\n      isAble: !this.taskState,\r\n      role:window.localStorage.getItem(\"role\"),\r\n      exeUrl:'',\r\n      exeName:'',\r\n      docUrl:'',\r\n      docName:''\r\n    }\r\n  },\r\n  components: {\r\n    FolderChecked,\r\n    Edit,\r\n    StarFilled,\r\n    // ReportItem\r\n  },\r\n  methods: {\r\n    enroll(){\r\n      this.$router.push(\"/taskEnrollSucceed\")\r\n    },\r\n    showEnrollError(){\r\n      ElMessage.error('非常抱歉，报名已经结束，看看其他项目吧');\r\n    },\r\n    downloadExe(){\r\n      oss.ossGetDownloadUrl(this.task.executableFileList[0].fileURL.substr(49))\r\n      .then(res => {\r\n        this.exeUrl = res.downloadURL\r\n        this.exeName = this.task.executableFileList[0].fileName\r\n        console.log(this.exeUrl)\r\n        console.log(this.exeName)\r\n      })\r\n    },\r\n    downloadDoc(){\r\n      oss.ossGetDownloadUrl(this.task.requirementDescriptionFileList[0].fileURL.substr(49))\r\n          .then(res => {\r\n            this.docUrl = res.downloadURL\r\n            this.docName = this.task.requirementDescriptionFileList[0].fileName\r\n            console.log(this.docUrl)\r\n            console.log(this.docName)\r\n          })\r\n    },\r\n    goReport\r\n  },\r\n  mounted() {\r\n    if(this.role === '0')\r\n    {\r\n      employerBrowserTaskDetail({token:window.localStorage.getItem(\"token\"),taskId:this.taskId})\r\n      .then(res => {\r\n        if(res.code === 1)\r\n        {\r\n          console.log(res.msg)\r\n          this.task.workerNumTotal = res.data.workerNumTotal\r\n          this.task.taskState = res.data.taskState\r\n          this.task.workerNumLeft = res.data.workerNumLeft\r\n          this.task.requirementDescriptionFileList = res.data.requirementDescriptionFileList\r\n          this.task.executableFileList = res.data.executableFileList\r\n          this.task.taskName = res.data.taskName\r\n          this.task.taskIntroduction = res.data.taskIntroduction\r\n          this.task.taskStartTime = res.data.beginTime\r\n          this.task.taskEndTime = res.data.endTime\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.breadcrumb{\r\n  margin-left: 20px;\r\n  font-family: 幼圆;\r\n  font-size: medium;\r\n  margin-top: -10px;\r\n}\r\n.box_card{\r\n  width: 90%;\r\n  margin-top: 10px;\r\n  margin-left: 5%;\r\n}\r\n.card_header{\r\n  margin-left: 5px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.header_tags{\r\n  display: flex;\r\n  flex-direction: row;\r\n  margin-top: 5px;\r\n}\r\n.information{\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.check_btn{\r\n  position: absolute;\r\n  right: 90px;\r\n  bottom: 65px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}